{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/nd/constants.js","webpack:///./src/palette.js","webpack:///./src/drum-machine.js","webpack:///./src/melody-line.js","webpack:///./src/nd/drumgan.js","webpack:///./src/nd/timbre.js","webpack:///./src/nd/score.js","webpack:///./src/neural-daw.js","webpack:///./src/index.js","webpack:///./src/utils.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","nd","Instruments","ToneInstruments","DrumInstruments","AllInstruments","MidiPitchToDrumInstrument","neuraldaw","MLDY","BASS","KICK","SNAR","CHAT","OHAT","LTOM","MTOM","HTOM","CRSH","RIDE","36","38","42","46","45","48","50","49","51","constants","palette","DrumMachine","id","_classCallCheck","this","notes","ui","loading","waiting","hoveringSounds","Array","fill","hoveringNotes","beat","canvas","document","getElementById","psize","size","width","height","canvasWidth","canvasHeight","borderRadius","ctx","getContext","save","clearRect","translate","step","thickness","fillStyle","colors","Math","random","fillRect","restore","Date","sin","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","note","pitch","quantizedStartStep","yPosition","quantizedEndStep","err","return","MelodyLine","melody_line_classCallCheck","melody","currentPosition","drawAnchorPoints","noteLength","w","h","unit","xSteps","ySteps","drumgan","tf","dg","DrumGAN","checkpointURI","initialized","initialize","_asyncToGenerator","regeneratorRuntime","mark","_callee","vars","_this","wrap","_context","prev","dispose","Error","fetch","concat","then","response","json","manifest","io","loadWeights","sent","modelVars","stop","sampleLatentVector","_ref2","_callee2","batchSize","seed","z","_z","_zs","_context2","randomUniform","abrupt","_x","_x2","arguments","conv1dTranspose","x","filter","stride","shape","numSamps","numCh","expandDims","conv2dTranspose","squeeze","generate","_ref3","_callee3","cs","zs","waveforms","_waveforms","waveformArrs","_this2","_context3","tidy","tensor2d","tensor1d","coh","oneHot","matMul","add","relu","reshape","tanh","conv1d","_x3","_x4","_this3","keys","forEach","mm","DRUMGAN_FS","TONEGAN_FS","TONEGAN_Z_DIM","MVAE_ID_TO_DRUMGAN_ID","2","3","4","5","6","7","8","9","10","11","tonegan","GANSynth","arraysToBuffers","sampleRate","buffers","array","buffer","createBuffer","ch","getChannelData","_initTone","timbre_asyncToGenerator","console","log","generateToneLatentVectors","_generateToneLatentVectors","randomNormal","_generateTones","midiPitches","specgrams","isInitialized","oneTimbreMultiplePitches","t0","specgramsToAudio","t1","_initDrum","_callee4","_context4","generateDrumLatentVectors","_x7","_x8","_generateDrumLatentVectors","_callee5","_context5","generateDrums","_x9","_x10","_x11","_x12","_generateDrums","_callee6","drumIds","_context6","_generateDrumKit","_callee7","_context7","timbre","initTone","generateTones","_x5","_x6","initDrum","generateDrumKit","_x13","_x14","_x15","mvaeTrio","MusicVAE","_generateTrio","score_asyncToGenerator","temperature","stepsPerQuarter","qpm","humanize","trio","sample","_updateTrioInstruments","oldTrio","updateInstruments","newTrio","oldNotes","newNotes","mergedNotes","ins","update","noteSource","encode","decode","indexOf","instrument","score","generateTrio","updateTrioInstruments","NeuralDAW","neural_daw_classCallCheck","initConstants","initSounds","tone","Player","_this$constants","toneMldyReverb","Freeverb","wet","connect","Master","MLDY_PITCHES","toneMldy","Sampler","volume","BASS_PITCHES","toneBass","toMaster","drumKitReverb","reverbInstruments","drumKit","drumId","replaceTone","_ref","neural_daw_asyncToGenerator","pitches","sampler","_i","Midi","toNote","replaceDrumKit","_i2","_drumId","replaceDrum","sounds","stopAll","releaseAll","setReverb","reverb","duration","time","_this$sounds","triggerAttackRelease","_nd","melodyOne","melodyTwo","drumMachine","context","seq","beatToNotes","sixteenthLengthSeconds","swing","swingDelaySeconds","mute","start","firstChild","textContent","resumeTransport","Transport","pauseTransport","pause","setBpm","bpm","updateTrio","src_asyncToGenerator","newTrioPromise","trioNotes","melodyOneNotes","melodyTwoNotes","drumNotes","isDrum","updateMelody","updateNotes","setup","Promise","all","Sequence","b","durationSteps","playNote","from","StartAudioContext","playBtn","onclick","state","onmouseenter","onmouseleave","onchange","e","target","max","_callee8","_context8","_callee9","_context9","_callee10","_context10","_loop","String","_callee11","_context11","_loop2","_callee12","_context12","btn","addEventListener","setButtonEvents","requestAnimationFrame","draw"],"mappings":"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","file":"js/app.a3eb9351.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([115,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","window.neuraldaw = window.neuraldaw || {};\n\n(function (nd) {\n  \n  const Instruments = {\n    MLDY: 0,\n    BASS: 1,\n    KICK: 2,\n    SNAR: 3,\n    CHAT: 4,\n    OHAT: 5,\n    LTOM: 6,\n    MTOM: 7,\n    HTOM: 8,\n    CRSH: 9,\n    RIDE: 10\n  };\n  \n  const ToneInstruments = [Instruments.MLDY, Instruments.BASS];\n  \n  const DrumInstruments = [\n    Instruments.KICK,\n    Instruments.SNAR,\n    Instruments.CHAT,\n    Instruments.OHAT,\n    Instruments.LTOM,\n    Instruments.MTOM,\n    Instruments.HTOM,\n    Instruments.CRSH,\n    Instruments.RIDE\n  ];\n  \n  const AllInstruments = [\n    Instruments.MLDY,\n    Instruments.BASS,\n    Instruments.KICK,\n    Instruments.SNAR,\n    Instruments.CHAT,\n    Instruments.OHAT,\n    Instruments.LTOM,\n    Instruments.MTOM,\n    Instruments.HTOM,\n    Instruments.CRSH,\n    Instruments.RIDE\n  ];\n  \n  // https://github.com/tensorflow/magenta/blob/master/magenta/music/drums_encoder_decoder.py\n  const MidiPitchToDrumInstrument = {\n    36: Instruments.KICK,\n    38: Instruments.SNAR,\n    42: Instruments.CHAT,\n    46: Instruments.OHAT,\n    45: Instruments.LTOM,\n    48: Instruments.MTOM,\n    50: Instruments.HTOM,\n    49: Instruments.CRSH,\n    51: Instruments.RIDE\n  };\n  \n  // Exports\n  nd.constants = {};\n  nd.constants.Instruments = Instruments;\n  nd.constants.AllInstruments = AllInstruments;\n  nd.constants.ToneInstruments = ToneInstruments;\n  nd.constants.DrumInstruments = DrumInstruments;\n  nd.constants.MidiPitchToDrumInstrument = MidiPitchToDrumInstrument;\n  \n})(window.neuraldaw);","// color palette\n\nexport default [\n  'rgba(53, 53, 53, 1)',\n  'rgba(60, 110, 113, 1)',\n  'rgba(255, 255, 255, 1)',\n  'rgba(217, 217, 217, 1)',\n  'rgba(40, 75, 99, 1)',\n  'rgba(80, 80, 80, 1)',\n  '#fd90a0',\n];\n\n\n\n\n","import size from 'element-size';\nimport colors from './palette';\n\n\nexport default class DrumMachine {\n\tconstructor(id, nd) {\n    this.id = id;\n    this.nd = nd;\n\t\tthis.notes = [];\n\t\tthis.ui = {};\n    this.loading = true;\n    this.waiting = false;\n\n    this.hoveringSounds = Array(9).fill(false);\n    this.hoveringNotes = Array(9).fill(true);\n  }\n\n  updateNotes(notes) {\n    this.loading = false;\n    this.notes = notes;\n  }\n\n  draw(beat) {\n    this.canvas = document.getElementById(this.id);\n    const psize = size(this.canvas);\n    this.canvas.width = psize[0] | 0;\n    this.canvas.height = psize[1] | 0;\n\n    const borderRadius = 5;\n    const canvasWidth = this.canvas.width;\n    const canvasHeight = this.canvas.height;\n    const width = canvasWidth - borderRadius * 2;\n    const height = canvasHeight - borderRadius * 2;\n    const ctx = this.canvas.getContext('2d');\n\n    ctx.save();\n\n    // background\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    ctx.translate(borderRadius, borderRadius * 0.5);\n\n    ctx.save();\n    const step = width / 64;\n    const thickness = canvasHeight / 9;\n    // anchor points\n    for (let j = 0; j < 9; j += 1) {\n      if (this.hoveringNotes[j]) {\n        // hovering notes\n        for (let i = 0; i < 64; i += 1) {\n          if (i % 4 === 0) {\n            ctx.save();\n            ctx.fillStyle = colors[6];\n            ctx.translate(i * step, (j + 0.25) * thickness);\n            if (Math.random() > 0.98) {\n              const large = 0.8;\n              // ctx.translate(-step * large * 0.25, -step * large * 0.25);\n              ctx.fillRect(0, 0, step * large, step * large);\n            } else {\n              ctx.translate(step * 0.3, step * 0.3);\n              ctx.fillRect(0, 0, step * 0.3, step * 0.3);\n            }\n            ctx.restore();\n          }\n        }\n      } else if (this.hoveringSounds[j]) {\n        for (let i = 0; i < 64; i += 1) {\n          if (i % 4 === 0) {\n            ctx.save();\n            ctx.fillStyle = colors[6];\n            ctx.translate(i * step, (j + 0.25) * thickness);\n            const d = new Date();\n            ctx.translate(0, Math.sin(d * 0.005 + i * 0.2 + j * 0.4) * thickness * 0.1);\n            const large = 0.3;\n            ctx.fillRect(0, 0, step * large, step * large);\n            ctx.restore();\n          }\n        }\n      } else {\n        // regular\n        for (let i = 0; i < 64; i += 1) {\n          if (i % 4 === 0) {\n            ctx.save();\n            ctx.fillStyle = colors[5];\n            ctx.translate(i * step, (j + 0.25) * thickness);\n            ctx.translate(step * 0.3, step * 0.3);\n            ctx.fillRect(0, 0, step * 0.3, step * 0.3);\n            ctx.restore();\n          }\n        }\n      }\n    }\n\n    if (!this.loading) {\n      // notes\n      for (let note of this.notes) {\n        const { pitch, quantizedStartStep, quantizedEndStep } = note;\n        const noteLength = quantizedEndStep - quantizedStartStep;\n        const yPosition = this.nd.constants.MidiPitchToDrumInstrument[pitch] - 2;\n\n        ctx.save();\n\n        ctx.translate(quantizedStartStep * step, ((8 - yPosition) + 0.25) * thickness);\n        if (!this.waiting) {\n          ctx.fillStyle = colors[3];\n        } else {\n          ctx.fillStyle = colors[5];\n        }\n        if (quantizedStartStep === beat) {\n          // ctx.fillStyle = colors[2];\n          ctx.fillStyle = colors[6];\n          ctx.translate(step * -0.3, step * -0.3);\n          ctx.fillRect(0, 0, step * 1.5, step * 1.5);\n        } else {\n          ctx.fillRect(0, 0, step * 0.9, step * 0.9);\n        }\n\n        ctx.restore();\n      }\n\n    }\n\n    ctx.restore();\n    ctx.restore();\n  }\n\n\n}\n","import colors from './palette';\nimport size from 'element-size';\n\n\nexport default class MelodyLine {\n  constructor(id) {\n    this.id = id;\n    this.melody = [];\n    this.loading = true;\n    this.currentPosition = 0;\n    this.canvas = document.getElementById(this.id);\n\n    this.hoveringNotes = true;\n    this.hoveringSounds = false;\n    this.waiting = false;\n  }\n\n  updateMelody(m) {\n    this.loading = false;\n    this.melody = m;\n    // console.log(m);\n  }\n\n  draw(beat) {\n    // fit the size\n    this.canvas = document.getElementById(this.id);\n    const psize = size(this.canvas);\n    this.canvas.width = psize[0]|0;\n    this.canvas.height = psize[1]|0;\n\n    const borderRadius = 5;\n    const canvasWidth = this.canvas.width;\n    const canvasHeight = this.canvas.height;\n    const width = canvasWidth - borderRadius * 2;\n    const height = canvasHeight - borderRadius * 2;\n    const ctx = this.canvas.getContext('2d');\n\n\n    ctx.save();\n\n    // background\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    ctx.translate(borderRadius, borderRadius);\n    this.drawAnchorPoints(ctx, width, height, width / 16);\n\n    if (!this.loading) {\n      ctx.save();\n\n      const step = width / 64;\n      const thickness = height / 64;\n\n      for (let note of this.melody) {\n        const { pitch, quantizedStartStep, quantizedEndStep } = note;\n        const noteLength = quantizedEndStep - quantizedStartStep;\n\n        ctx.save();\n\n        ctx.translate(quantizedStartStep * step, (64 - (pitch - 28)) * thickness);\n        if (!this.waiting) {\n          ctx.fillStyle = colors[3];\n        } else {\n          ctx.fillStyle = colors[5];\n        }\n        if (beat >= quantizedStartStep && beat < quantizedEndStep) {\n          // ctx.fillStyle = colors[2];\n          ctx.fillStyle = colors[6];\n          ctx.translate(-noteLength * step * 0.1, -2.5);\n          ctx.fillRect(0, 0, noteLength * step * 1.1, 10);\n        } else {\n          ctx.fillRect(0, 0, noteLength * step * 0.9, 5);\n        }\n\n        ctx.restore();\n      }\n\n      ctx.restore();\n    }\n    ctx.restore();\n  }\n\n  drawAnchorPoints(ctx, w, h, unit) {\n    ctx.save();\n    const size = 2;\n    const xSteps = w / unit;\n    const ySteps = h / unit;\n    for (let i = 0; i <= xSteps; i += 1) {\n      for (let j = 0; j <= ySteps + 1; j += 1) {\n        ctx.save();\n        ctx.fillStyle = colors[5];\n        ctx.translate(i * unit, j * unit);\n\n\n        if (this.hoveringSounds) {\n          ctx.fillStyle = colors[6];\n          const d = new Date();\n          ctx.translate(0, Math.sin(d * 0.005 + i * 0.3 + j * 0.3) * ySteps * 0.5);\n          ctx.fillRect(0, 0, size, size);\n        } else if (this.hoveringNotes) {\n          ctx.fillStyle = colors[6];\n          if (Math.random() > 0.98) {\n            ctx.translate(-size * 1.5, -size * 1.5);\n            ctx.fillRect(0, 0, size * 3, size * 3);\n          } else {\n            ctx.fillRect(0, 0, size, size);\n          }\n        } else {\n          ctx.fillRect(0, 0, size, size);\n        }\n        ctx.restore();\n      }\n    }\n    ctx.restore();\n  }\n\n}\n","window.drumgan = window.drumgan || {};\n\n(function (tf, dg) {\n  \n  const FS = 22050;\n  const Z_DIM = 50;\n  const C_DIM = 8;\n  \n  const DrumInstruments = {\n    KICK: 0,\n    SNARE: 1,\n    CHAT: 2,\n    OHAT: 3,\n    TOM: 4,\n    CRASH: 5,\n    RIDE: 6,\n    CLAP: 7\n  };\n  \n  const DrumGAN = function (checkpointURI) {\n    this.initialized = false;\n    this.checkpointURI = checkpointURI;\n  };\n  \n  DrumGAN.prototype.initialize = async function () {\n    if (this.initialized) {\n      this.dispose();\n    }\n\n    if (this.checkpointURI === undefined) {\n      throw new Error('Need to specify checkpoint URI');\n    }\n\n    const vars = await fetch(`${this.checkpointURI}/weights_manifest.json`)\n      .then((response) => response.json())\n      .then(\n        (manifest) =>\n          tf.io.loadWeights(manifest, this.checkpointURI));\n    this.modelVars = vars;\n\n    this.initialized = true;\n  };\n  \n  DrumGAN.prototype.sampleLatentVector = async function (batchSize, seed) {\n    //const backend = tf.getBackend();\n    //tf.setBackend('cpu');\n    \n    const z = tf.randomUniform([batchSize, Z_DIM], -1., 1., 'float32', seed);\n    const _z = await z.data();\n    z.dispose();\n    \n    //tf.setBackend(backend);\n    \n    const _zs = [];\n    for (let i = 0; i < batchSize; ++i) {\n      _zs.push(_z.slice(i * Z_DIM, (i + 1) * Z_DIM));\n    }\n    \n    return _zs;\n  };\n  \n  const conv1dTranspose = function (x, filter, stride) {\n    const batchSize = x.shape[0];\n    const numSamps = x.shape[1];\n    const numCh = filter.shape[2];\n    \n    x = tf.expandDims(x, 1);\n    x = tf.conv2dTranspose(\n      x,\n      filter,\n      [batchSize, 1, numSamps * stride, numCh],\n      [1, stride],\n      'same');\n    x = tf.squeeze(x, 1);\n    \n    return x;\n  };\n  \n  DrumGAN.prototype.generate = async function (cs, zs) {\n    if (zs.length !== cs.length) {\n      throw new Error('Array of latent vectors must be same length as array of drum IDs');\n    }\n    \n    const batchSize = zs.length;\n    \n    const waveforms = tf.tidy(() => {\n      const z = tf.tensor2d(zs, [batchSize, Z_DIM], 'float32');\n\n      const c = tf.tensor1d(cs, 'int32');\n      const coh = tf.oneHot(c, C_DIM);\n      \n      // Concat c and z\n      let x = tf.concat([coh, z], 1);\n      \n      // Dense\n      x = tf.matMul(x, this.modelVars['G/z_project/dense/kernel']);\n      x = tf.add(x, this.modelVars['G/z_project/dense/bias']);\n      x = tf.relu(x);\n      \n      // Convolve input\n      x = tf.reshape(x, [batchSize, 16, -1]);\n      \n      // Convolve\n      x = conv1dTranspose(x, this.modelVars['G/upconv_0/conv2d_transpose/kernel'], 4);\n      x = tf.add(x, this.modelVars['G/upconv_0/conv2d_transpose/bias']);\n      x = tf.relu(x);\n\n      x = conv1dTranspose(x, this.modelVars['G/upconv_1/conv2d_transpose/kernel'], 4);\n      x = tf.add(x, this.modelVars['G/upconv_1/conv2d_transpose/bias']);\n      x = tf.relu(x);\n\n      x = conv1dTranspose(x, this.modelVars['G/upconv_2/conv2d_transpose/kernel'], 4);\n      x = tf.add(x, this.modelVars['G/upconv_2/conv2d_transpose/bias']);\n      x = tf.relu(x);\n      \n      x = conv1dTranspose(x, this.modelVars['G/upconv_3/conv2d_transpose/kernel'], 4);\n      x = tf.add(x, this.modelVars['G/upconv_3/conv2d_transpose/bias']);\n      x = tf.relu(x);\n      \n      x = conv1dTranspose(x, this.modelVars['G/upconv_4/conv2d_transpose/kernel'], 4);\n      x = tf.add(x, this.modelVars['G/upconv_4/conv2d_transpose/bias']);\n      x = tf.relu(x);\n      \n      x = conv1dTranspose(x, this.modelVars['G/upconv_5/conv2d_transpose/kernel'], 2);\n      x = tf.add(x, this.modelVars['G/upconv_5/conv2d_transpose/bias']);\n      x = tf.tanh(x);\n      \n      // Post process\n      x = tf.conv1d(x, this.modelVars['G/pp_filt/conv1d/kernel'], 1, 'same');\n      \n      return x;\n    });\n    \n    const _waveforms = await waveforms.data();\n    waveforms.dispose();\n    \n    const waveformArrs = [];\n    for (let i = 0; i < batchSize; ++i) {\n      waveformArrs.push(_waveforms.slice(i * 32768, (i + 1) * 32768));\n    }\n    \n    return waveformArrs;\n  };\n  \n  DrumGAN.prototype.dispose = function () {\n    if (!this.initialized) {\n      return;\n    }\n    Object.keys(this.modelVars).forEach(\n      name => this.modelVars[name].dispose());\n    this.initialized = false;\n  };\n\n  // Exports\n  dg.DrumGAN = DrumGAN;\n\n  \n})(window.tf, window.drumgan);","window.neuraldaw = window.neuraldaw || {};\n\n(function (tf, mm, dg, nd) {\n  \n  const DRUMGAN_FS = 22050;\n  const TONEGAN_FS = 16000;\n  \n  //const DRUMGAN_Z_DIM = 50;\n  const TONEGAN_Z_DIM = 256;\n  \n  const DRUMGAN_CKPT = 'https://cdn.glitch.com/4437fe19-97b4-4470-a9cf-94e3543ccbac';\n  const TONEGAN_CKPT = 'https://storage.googleapis.com/magentadata/js/checkpoints/gansynth/acoustic_only';\n  \n  const MVAE_ID_TO_DRUMGAN_ID = {\n    2: 0,\n    3: 1,\n    4: 2,\n    5: 3,\n    6: 4,\n    7: 4,\n    8: 4,\n    9: 5,\n    10: 6,\n    11: 7\n  };\n  \n  const Instruments = nd.constants.Instruments;\n  const AllInstruments = nd.constants.AllInstruments;\n  \n  const tonegan = new mm.GANSynth(TONEGAN_CKPT);\n  const drumgan = new dg.DrumGAN(DRUMGAN_CKPT);\n  \n  function arraysToBuffers(x, sampleRate, ctx) {\n    const buffers = [];\n    for (let i = 0; i < x.length; ++i) {\n      const array = x[i];\n      const buffer = ctx.createBuffer(1, array.length, sampleRate);\n      const ch = buffer.getChannelData(0);\n      for (let j = 0; j < array.length; ++j) {\n        ch[j] = array[j];\n      }\n      buffers.push(buffer);\n    }\n    return buffers;\n  }\n  \n  async function initTone() {\n    console.log('init');\n    await tonegan.initialize();\n  }\n  \n  async function generateToneLatentVectors(batchSize, seed) {\n    //const backend = tf.getBackend();\n    //tf.setBackend('cpu');\n    \n    const z = tf.randomNormal([batchSize, TONEGAN_Z_DIM], 0., 1., 'float32', seed);\n    const _z = await z.data();\n    z.dispose();\n    \n    //tf.setBackend(backend);\n    \n    const _zs = [];\n    for (let i = 0; i < batchSize; ++i) {\n      _zs.push(_z.slice(i * TONEGAN_Z_DIM, (i + 1) * TONEGAN_Z_DIM));\n    }\n    \n    return _zs;\n  }\n  \n  async function generateTones(midiPitches, ctx, zs, seed) {\n    // TODO: Check that midiPitches is a list and that it contains valid MIDI range [24, 84]\n    \n    if (!tonegan.isInitialized()) {\n      throw 'Call initTone first';\n    }\n    \n    const batchSize = midiPitches.length;\n    \n    if (zs === undefined) {\n      zs = await generateToneLatentVectors(1, seed);\n    }\n    \n    const specgrams = tonegan.oneTimbreMultiplePitches(zs[0], midiPitches);\n    const waveforms = [];\n    for (let i = 0; i < midiPitches.length; ++i) {\n      waveforms.push(await tonegan.specgramsToAudio(specgrams, i));\n    }\n    specgrams.dispose();\n    \n    const buffers = arraysToBuffers(waveforms, TONEGAN_FS, ctx);\n    return buffers;\n  }\n  \n  async function initDrum() {\n    await drumgan.initialize();\n  }\n  \n  async function generateDrumLatentVectors(batchSize, seed) {\n    return await drumgan.sampleLatentVector(batchSize, seed);\n  }\n  \n  async function generateDrums(drumIds, ctx, zs, seed) {\n    const batchSize = drumIds.length;\n    \n    const cs = [];\n    for (let i = 0; i < batchSize; ++i) {\n      cs.push(MVAE_ID_TO_DRUMGAN_ID[drumIds[i]]);\n    }\n    \n    if (zs === undefined) {\n      zs = await generateDrumLatentVectors(batchSize, seed);\n    }\n    \n    const waveforms = await drumgan.generate(cs, zs);\n    \n    const buffers = arraysToBuffers(waveforms, DRUMGAN_FS, ctx);\n    return buffers;\n  }\n  \n  async function generateDrumKit(ctx, z, seed) {\n    return await generateDrums(nd.constants.DrumInstruments, ctx, z, seed);\n  }\n\n  // Exports\n  nd.timbre = {};\n  nd.timbre.initTone = initTone;\n  nd.timbre.generateToneLatentVectors = generateToneLatentVectors;\n  nd.timbre.generateTones = generateTones;\n  nd.timbre.initDrum = initDrum;\n  nd.timbre.generateDrumLatentVectors = generateDrumLatentVectors;\n  nd.timbre.generateDrums = generateDrums;\n  nd.timbre.generateDrumKit = generateDrumKit;\n\n  \n})(window.tf, window.mm, window.drumgan, window.neuraldaw);","window.neuraldaw = window.neuraldaw || {};\n\n(function (mm, nd) {\n  \n  const TRIO_CKPT = 'https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/trio_4bar';\n  const HUMANIZE_CKPT = 'https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/groovae_unquantize_4bar';\n  const Instruments = nd.constants.Instruments;\n  const AllInstruments = nd.constants.AllInstruments;\n  \n  const mvaeTrio = new mm.MusicVAE(TRIO_CKPT);\n  const mvaeGroove = new mm.MusicVAE(HUMANIZE_CKPT);\n  \n  async function generateTrio(temperature, stepsPerQuarter, qpm, humanize) {\n    const trio = (await mvaeTrio.sample(1, temperature, undefined, stepsPerQuarter, qpm))[0];\n\n    /*\n    const z = (await mvaeGroove.encode([trio]));\n    const trioHuman = (await mvaeGroove.decode(z, temperature, undefined, stepsPerQuarter, qpm))[0];\n    z.dispose();\n    */\n    \n    return trio;\n  }\n  \n  async function updateTrioInstruments(oldTrio, updateInstruments, temperature, stepsPerQuarter, qpm) {\n    if (updateInstruments.length === 0) {\n      return oldTrio;\n    }\n    \n    const z = await mvaeTrio.encode([oldTrio]);\n    const newTrio = (await mvaeTrio.decode(z, temperature, undefined, stepsPerQuarter, qpm))[0];\n    z.dispose();\n\n    const oldNotes = oldTrio.notes;\n    const newNotes = newTrio.notes;\n    \n    const mergedNotes = [];    \n    for (let i = 0; i < AllInstruments.length; ++i) {\n      const ins = AllInstruments[i];\n      const update = updateInstruments.indexOf(ins) >= 0;\n      const noteSource = update ? newNotes : oldNotes;\n      for (let j = 0; j < noteSource.length; ++j) {\n        const note = noteSource[j];\n        if (ins === Instruments.MLDY && note.instrument === 0) {\n          mergedNotes.push(note);\n        } else if (ins === Instruments.BASS && note.instrument === 1) {\n          mergedNotes.push(note);\n        } else if (note.instrument === 2) {\n          if (ins === nd.constants.MidiPitchToDrumInstrument[note.pitch]) {\n            mergedNotes.push(note);\n          }\n        }\n      }\n    }\n    \n    // TODO(chrisdonahue): Sort notes\n    \n    newTrio.notes = mergedNotes;\n    \n    return newTrio;\n  }\n  \n  // Exports\n  nd.score = {}\n  nd.score.generateTrio = generateTrio;\n  nd.score.updateTrioInstruments = updateTrioInstruments;\n  \n})(window.mm, window.neuraldaw);","// import * as mm from '@magenta/music';\nconst mm = window.mm;\nconst nd = window.neuraldaw;\n\nexport default class NeuralDAW {\n  constructor() {\n    this.constants = {};\n    this.timbre = window.neuraldaw.timbre;\n    this.mm = {};\n    this.score = {};\n\n    this.initConstants();\n    this.initSounds();\n  }\n\n  initConstants() {\n    const Instruments = {\n      MLDY: 0,\n      BASS: 1,\n      KICK: 2,\n      SNAR: 3,\n      CHAT: 4,\n      OHAT: 5,\n      LTOM: 6,\n      MTOM: 7,\n      HTOM: 8,\n      CRSH: 9,\n      RIDE: 10\n    };\n\n    const ToneInstruments = [Instruments.MLDY, Instruments.BASS];\n    const DrumInstruments = [\n      Instruments.KICK,\n      Instruments.SNAR,\n      Instruments.CHAT,\n      Instruments.OHAT,\n      Instruments.LTOM,\n      Instruments.MTOM,\n      Instruments.HTOM,\n      Instruments.CRSH,\n      Instruments.RIDE\n    ];\n\n    const AllInstruments = [\n      Instruments.MLDY,\n      Instruments.BASS,\n      Instruments.KICK,\n      Instruments.SNAR,\n      Instruments.CHAT,\n      Instruments.OHAT,\n      Instruments.LTOM,\n      Instruments.MTOM,\n      Instruments.HTOM,\n      Instruments.CRSH,\n      Instruments.RIDE\n    ];\n\n    const MidiPitchToDrumInstrument = {\n      36: Instruments.KICK,\n      38: Instruments.SNAR,\n      42: Instruments.CHAT,\n      46: Instruments.OHAT,\n      45: Instruments.LTOM,\n      48: Instruments.MTOM,\n      50: Instruments.HTOM,\n      49: Instruments.CRSH,\n      51: Instruments.RIDE\n    };\n\n    this.constants = {\n      Instruments,\n      ToneInstruments,\n      DrumInstruments,\n      AllInstruments,\n      MidiPitchToDrumInstrument\n    };\n  }\n\n  initSounds() {\n    const tone = mm.Player.tone;\n    const { Instruments, DrumInstruments } = this.constants;\n\n    const toneMldyReverb = new tone.Freeverb(0.75);\n    toneMldyReverb.wet.value = 0;\n    toneMldyReverb.connect(tone.Master);\n\n    const MLDY_PITCHES = [24, 36, 48, 60, 72, 84];\n    const toneMldy = new tone.Sampler();\n    toneMldy.volume.value = -12;\n    toneMldy.connect(toneMldyReverb);\n\n    const BASS_PITCHES = [24, 36, 48, 60, 72, 84];\n    const toneBass = new tone.Sampler();\n    toneBass.volume.value = -12;\n    toneBass.toMaster();\n\n    const drumKitReverb = new tone.Freeverb(0.1);\n    drumKitReverb.wet.value = 0;\n    drumKitReverb.toMaster();\n\n    const reverbInstruments = [\n      Instruments.CHAT,\n      Instruments.OHAT,\n      Instruments.CRSH,\n      Instruments.RIDE\n    ];\n\n    const drumKit = {};\n    for (let i = 0; i < DrumInstruments.length; ++i) {\n      const drumId = DrumInstruments[i];\n      drumKit[drumId] = new tone.Sampler();\n      if (reverbInstruments.indexOf(drumId) >= 0) {\n        drumKit[drumId].volume.value = -12;\n        drumKit[drumId].connect(drumKitReverb);\n      } else {\n        drumKit[drumId].volume.value = -12;\n        drumKit[drumId].toMaster();\n      }\n    }\n\n    const replaceTone = async (ctx, id) => {\n      const Instruments = this.constants.Instruments;\n      let pitches;\n      let sampler;\n      if (id === Instruments.MLDY) {\n        pitches = MLDY_PITCHES;\n        sampler = toneMldy;\n      } else if (id === Instruments.BASS) {\n        pitches = BASS_PITCHES;\n        sampler = toneBass;\n      } else {\n        throw \"Invalid instrument ID\";\n      }\n\n      // const buffers = await this.timbre.generateTones(pitches, ctx);\n      const buffers = await nd.timbre.generateTones(pitches, ctx);\n      for (let i = 0; i < pitches.length; ++i) {\n        sampler.add(tone.Midi(pitches[i]).toNote(), buffers[i]);\n      }\n    };\n\n    const replaceDrumKit = async ctx => {\n      // const buffers = await this.timbre.generateDrumKit(ctx);\n      const buffers = await nd.timbre.generateDrumKit(ctx);\n      for (let i = 0; i < DrumInstruments.length; ++i) {\n        const drumId = DrumInstruments[i];\n        drumKit[drumId].add(tone.Midi(60).toNote(), buffers[i]);\n      }\n    };\n\n    const replaceDrum = async (ctx, drumId) => {\n      // const buffers = await this.timbre.generateDrums([drumId], ctx);\n      const buffers = await nd.timbre.generateDrums([drumId], ctx);\n      drumKit[drumId].add(tone.Midi(60).toNote(), buffers[0]);\n    };\n\n    const stopAll = () => {\n      toneMldy.releaseAll();\n      toneBass.releaseAll();\n      for (let i = 0; i < DrumInstruments.length; ++i) {\n        const drumId = DrumInstruments[i];\n        drumKit[drumId].releaseAll();\n      }\n    };\n\n    const setReverb = reverb => {\n      toneMldyReverb.wet.value = reverb;\n      drumKitReverb.wet.value = reverb;\n    };\n\n    this.sounds = {\n      drumKit,\n      toneMldy,\n      toneBass,\n      replaceTone,\n      replaceDrumKit,\n      replaceDrum,\n      stopAll,\n      setReverb\n    };\n  }\n\n  playNote(instrument, note, duration, time) {\n    const tone = mm.Player.tone;\n    const { toneMldy, toneBass, drumKit } = this.sounds;\n\n    if (instrument === this.constants.Instruments.MLDY) {\n      toneMldy.triggerAttackRelease(\n        tone.Midi(note.pitch).toNote(),\n        duration,\n        time\n      );\n    } else if (instrument === this.constants.Instruments.BASS) {\n      toneBass.triggerAttackRelease(\n        tone.Midi(note.pitch).toNote(),\n        duration,\n        time\n      );\n    } else {\n      drumKit[instrument].triggerAttackRelease(\n        tone.Midi(60).toNote(),\n        duration,\n        time\n      );\n    }\n  }\n}\n","import StartAudioContext from \"startaudiocontext\";\nimport \"./index.scss\";\nimport DrumMachine from \"./drum-machine\";\nimport MelodyLine from \"./melody-line\";\nimport { copyRight } from \"./utils\";\n\nwindow.neuraldaw = window.neuraldaw || {};\n\nimport \"./nd/constants\";\nimport \"./nd/drumgan\";\nimport \"./nd/timbre\";\nimport \"./nd/score\";\n\nimport NeuralDAW from \"./neural-daw\";\n\n// const nd = new NeuralDAW();\nconst _nd = window.neuraldaw;\nconst nd = new NeuralDAW();\nconst melodyOne = new MelodyLine(\"canvas-1\");\nconst melodyTwo = new MelodyLine(\"canvas-2\");\nconst drumMachine = new DrumMachine(\"canvas-3\", nd);\nconst tone = window.mm.Player.tone;\nconst ctx = tone.context;\nconst { Instruments, DrumInstruments } = nd.constants;\nlet loading = true;\nlet seq = {};\nlet trio = {};\nlet beatToNotes = {};\nlet beat = 0;\nlet sixteenthLengthSeconds = 0;\nlet swing = 0;\nlet swingDelaySeconds = 0;\nconst scoreUpdateJitterAmt = 0.4;\nlet mute = [false, false, false];\n\nconst start = () => {\n  const playBtn = document.getElementById(\"play\");\n  playBtn.firstChild.textContent = \"stop\";\n  seq.start();\n};\n\nconst stop = () => {\n  const playBtn = document.getElementById(\"play\");\n  playBtn.firstChild.textContent = \"play\";\n  seq.stop();\n  nd.sounds.stopAll();\n};\n\nconst resumeTransport = () => {\n  tone.Transport.start();\n};\n\nconst pauseTransport = () => {\n  nd.sounds.stopAll();\n  tone.Transport.pause();\n};\n\nconst setBpm = bpm => {\n  tone.Transport.bpm.value = bpm;\n  sixteenthLengthSeconds = 60 / bpm / 4;\n  swingDelaySeconds = swing * sixteenthLengthSeconds;\n};\n\nconst updateTrio = async newTrioPromise => {\n  trio = await newTrioPromise;\n  const trioNotes = trio.notes;\n\n  beatToNotes = {};\n  for (let i = 0; i < trioNotes.length; ++i) {\n    const note = trioNotes[i];\n    const s = note.quantizedStartStep % 64;\n    if (!(s in beatToNotes)) {\n      beatToNotes[s] = [];\n    }\n    beatToNotes[s].push(note);\n  }\n\n  const melodyOneNotes = trioNotes.filter(n => n.instrument === 0);\n  const melodyTwoNotes = trioNotes.filter(n => n.instrument === 1);\n  const drumNotes = trioNotes.filter(n => n.isDrum);\n  melodyOne.updateMelody(melodyOneNotes);\n  melodyTwo.updateMelody(melodyTwoNotes);\n  drumMachine.updateNotes(drumNotes);\n};\n\nconst setup = async () => {\n  // scores and timbre\n  await Promise.all([_nd.timbre.initTone(), _nd.timbre.initDrum()]);\n  console.log(\"(0/2)...loading score and timbres\");\n  await Promise.all([\n    nd.sounds.replaceTone(ctx, Instruments.MLDY),\n    nd.sounds.replaceTone(ctx, Instruments.BASS),\n    nd.sounds.replaceDrumKit(ctx),\n    updateTrio(_nd.score.generateTrio())\n  ]);\n  console.log(\"(1/2)...loaded score and timbres\");\n\n  // volume and bpm\n  setBpm(120);\n  tone.Master.volume.value = 20 * Math.log(0.8);\n\n  // sequencer\n  seq = new tone.Sequence(\n    (time, b) => {\n      beat = b;\n      // console.log(`b: ${beat}`);\n\n      let notes = [];\n      if (beat in beatToNotes) {\n        notes = beatToNotes[beat];\n      }\n\n      if (b % 2 === 1) {\n        time += swingDelaySeconds;\n      }\n\n      for (let i = 0; i < notes.length; ++i) {\n        const note = notes[i];\n\n        const durationSteps = note.quantizedEndStep - note.quantizedStartStep;\n        if (durationSteps <= 0) {\n          continue;\n        }\n\n        let duration = durationSteps * sixteenthLengthSeconds;\n        // TODO: add or subtract swing delay...\n\n        let instrument;\n        if (note.instrument === 0) {\n          instrument = Instruments.MLDY;\n        } else if (note.instrument === 1) {\n          instrument = Instruments.BASS;\n        } else if (note.instrument === 2) {\n          instrument = nd.constants.MidiPitchToDrumInstrument[note.pitch];\n        }\n        if (!mute[note.instrument]) {\n          nd.playNote(instrument, note, duration, time);\n        }\n      }\n    },\n    Array.from(Array(64).keys()),\n    \"16n\"\n  );\n  tone.Transport.start();\n\n  // loaded and play\n  console.log(\"(2/2)...the sequencer starts.\");\n\n  const playBtn = document.getElementById(\"play\");\n  playBtn.firstChild.textContent = \"stop\";\n  loading = false;\n  drumMachine.hoveringNotes = Array(9).fill(false);\n  melodyOne.hoveringNotes = false;\n  melodyTwo.hoveringNotes = false;\n  seq.start();\n};\n\nconst setButtonEvents = () => {\n  // play & stop\n  const playBtn = document.getElementById(\"play\");\n  playBtn.onclick = () => {\n    if (!loading) {\n      if (seq.state === \"started\") {\n        stop();\n      } else {\n        start();\n      }\n    }\n  };\n\n  // reload\n  document.getElementById(\"reload\").onclick = async () => {\n    stop();\n\n    // scores and timbre\n    console.log(\"(0/1)...loading score and timbres\");\n    drumMachine.waiting = true;\n    melodyOne.waiting = true;\n    melodyTwo.waiting = true;\n\n    await Promise.all([\n      nd.sounds.replaceTone(ctx, Instruments.MLDY),\n      nd.sounds.replaceTone(ctx, Instruments.BASS),\n      nd.sounds.replaceDrumKit(ctx),\n      updateTrio(_nd.score.generateTrio())\n    ]);\n\n    console.log(\"(1/1)...loaded score and timbres\");\n    drumMachine.waiting = false;\n    melodyOne.waiting = false;\n    melodyTwo.waiting = false;\n\n    start();\n  };\n  document.getElementById(\"reload\").onmouseenter = () => {\n    melodyOne.hoveringSounds = true;\n    melodyTwo.hoveringSounds = true;\n    drumMachine.hoveringSounds = Array(9).fill(true);\n  };\n  document.getElementById(\"reload\").onmouseleave = () => {\n    melodyOne.hoveringSounds = false;\n    melodyTwo.hoveringSounds = false;\n    drumMachine.hoveringSounds = Array(9).fill(false);\n  };\n  document.getElementById(\"update-sco-all\").onclick = async () => {\n    stop();\n\n    // scores and timbre\n    console.log(\"(0/1)...loading score and timbres\");\n    drumMachine.waiting = true;\n    melodyOne.waiting = true;\n    melodyTwo.waiting = true;\n    await Promise.all([updateTrio(_nd.score.generateTrio())]);\n    console.log(\"(1/1)...loaded score and timbres\");\n    drumMachine.waiting = false;\n    melodyOne.waiting = false;\n    melodyTwo.waiting = false;\n\n    start();\n  };\n  document.getElementById(\"update-sco-all\").onmouseenter = () => {\n    melodyOne.hoveringNotes = true;\n    melodyTwo.hoveringNotes = true;\n    drumMachine.hoveringNotes = Array(9).fill(true);\n  };\n  document.getElementById(\"update-sco-all\").onmouseleave = () => {\n    melodyOne.hoveringNotes = false;\n    melodyTwo.hoveringNotes = false;\n    drumMachine.hoveringNotes = Array(9).fill(false);\n  };\n\n  document.getElementById(\"update-tim-melody-bass\").onclick = async () => {\n    stop();\n\n    // scores and timbre\n    console.log(\"(0/1)...loading score and timbres\");\n    melodyOne.waiting = true;\n    melodyTwo.waiting = true;\n    await Promise.all([\n      nd.sounds.replaceTone(ctx, Instruments.MLDY),\n      nd.sounds.replaceTone(ctx, Instruments.BASS)\n    ]);\n    console.log(\"(1/1)...loaded score and timbres\");\n    melodyOne.waiting = false;\n    melodyTwo.waiting = false;\n\n    start();\n  };\n  document.getElementById(\"update-tim-melody-bass\").onmouseenter = () => {\n    melodyOne.hoveringSounds = true;\n    melodyTwo.hoveringSounds = true;\n  };\n  document.getElementById(\"update-tim-melody-bass\").onmouseleave = () => {\n    melodyOne.hoveringSounds = false;\n    melodyTwo.hoveringSounds = false;\n  };\n  document.getElementById(\"update-tim-drums\").onclick = async () => {\n    stop();\n\n    // scores and timbre\n    console.log(\"(0/1)...loading score and timbres\");\n    drumMachine.waiting = true;\n    await Promise.all([nd.sounds.replaceDrumKit(ctx)]);\n    console.log(\"(1/1)...loaded score and timbres\");\n    drumMachine.waiting = false;\n\n    start();\n  };\n  document.getElementById(\"update-tim-drums\").onmouseenter = () => {\n    drumMachine.hoveringSounds = Array(9).fill(true);\n  };\n  document.getElementById(\"update-tim-drums\").onmouseleave = () => {\n    drumMachine.hoveringSounds = Array(9).fill(false);\n  };\n\n  //volume\n  document.getElementById(\"volume\").onchange = e => {\n    const value = 20 * Math.log(e.target.value * 0.01);\n    tone.Master.volume.value = value;\n  };\n\n  // bpm\n  document.getElementById(\"bpm\").onchange = e => {\n    setBpm(e.target.value);\n  };\n\n  // swing\n  document.getElementById(\"swing\").onchange = e => {\n    // Limit swing delay to 32nd note\n    swing = 0.5 * (e.target.value / e.target.max);\n    swingDelaySeconds = swing * sixteenthLengthSeconds;\n  };\n\n  // reverb\n  document.getElementById(\"reverb\").onchange = e => {\n    const wet = e.target.value / e.target.max;\n    nd.sounds.setReverb(wet);\n  };\n\n  // melody\n  document.getElementById(\"update-sco-tm\").onclick = async () => {\n    pauseTransport();\n    melodyOne.waiting = true;\n    await updateTrio(\n      _nd.score.updateTrioInstruments(\n        trio,\n        [Instruments.MLDY],\n        scoreUpdateJitterAmt\n      )\n    );\n    resumeTransport();\n    melodyOne.waiting = false;\n  };\n  document.getElementById(\"update-sco-tm\").onmouseenter = () => {\n    melodyOne.hoveringNotes = true;\n  };\n  document.getElementById(\"update-sco-tm\").onmouseleave = () => {\n    melodyOne.hoveringNotes = false;\n  };\n  document.getElementById(\"update-tim-tm\").onclick = async () => {\n    pauseTransport();\n    melodyOne.waiting = true;\n    await nd.sounds.replaceTone(ctx, Instruments.MLDY);\n    resumeTransport();\n    melodyOne.waiting = false;\n  };\n  document.getElementById(\"update-tim-tm\").onmouseenter = () => {\n    melodyOne.hoveringSounds = true;\n  };\n  document.getElementById(\"update-tim-tm\").onmouseleave = () => {\n    melodyOne.hoveringSounds = false;\n  };\n\n  // bass\n  document.getElementById(\"update-sco-tb\").onclick = async () => {\n    pauseTransport();\n    melodyTwo.waiting = true;\n    await _nd.score.updateTrioInstruments(\n      trio,\n      [Instruments.BASS],\n      scoreUpdateJitterAmt\n    );\n    resumeTransport();\n    melodyTwo.waiting = false;\n  };\n  document.getElementById(\"update-sco-tb\").onmouseenter = () => {\n    melodyTwo.hoveringNotes = true;\n  };\n  document.getElementById(\"update-sco-tb\").onmouseleave = () => {\n    melodyTwo.hoveringNotes = false;\n  };\n  document.getElementById(\"update-tim-tb\").onclick = async () => {\n    pauseTransport();\n    melodyTwo.waiting = true;\n    await nd.sounds.replaceTone(ctx, Instruments.BASS);\n    resumeTransport();\n    melodyTwo.waiting = false;\n  };\n  document.getElementById(\"update-tim-tb\").onmouseenter = () => {\n    melodyTwo.hoveringSounds = true;\n  };\n  document.getElementById(\"update-tim-tb\").onmouseleave = () => {\n    melodyTwo.hoveringSounds = false;\n  };\n\n  // drums\n  for (let i = 0; i < DrumInstruments.length; ++i) {\n    document.getElementById(\"update-sco-d\" + String(i)).onclick = async () => {\n      pauseTransport();\n      drumMachine.waiting = true;\n      await updateTrio(\n        _nd.score.updateTrioInstruments(\n          trio,\n          [DrumInstruments[i]],\n          scoreUpdateJitterAmt\n        )\n      );\n      resumeTransport();\n      drumMachine.waiting = false;\n    };\n    document.getElementById(\"update-sco-d\" + String(i)).onmouseenter = () => {\n      drumMachine.hoveringNotes[8 - i] = true;\n    };\n    document.getElementById(\"update-sco-d\" + String(i)).onmouseleave = () => {\n      drumMachine.hoveringNotes[8 - i] = false;\n    };\n  }\n  for (let i = 0; i < DrumInstruments.length; ++i) {\n    document.getElementById(\"update-tim-d\" + String(i)).onclick = async () => {\n      pauseTransport();\n      drumMachine.waiting = true;\n      await nd.sounds.replaceDrum(ctx, DrumInstruments[i]);\n      resumeTransport();\n      drumMachine.waiting = false;\n    };\n    document.getElementById(\"update-tim-d\" + String(i)).onmouseenter = () => {\n      drumMachine.hoveringSounds[8 - i] = true;\n    };\n    document.getElementById(\"update-tim-d\" + String(i)).onmouseleave = () => {\n      drumMachine.hoveringSounds[8 - i] = false;\n    };\n  }\n\n  // mute\n  const MELODY = 0;\n  const BASS = 1;\n  const DRUM = 2;\n  const muteButtons = [\n    document.getElementById(\"mute-melody\"),\n    document.getElementById(\"mute-bass\"),\n    document.getElementById(\"mute-drum\")\n  ];\n  muteButtons.forEach((btn, i) => {\n    btn.addEventListener(\"click\", () => {\n      if (mute[i]) {\n        btn.firstChild.textContent = \"🔈\";\n      } else {\n        btn.firstChild.textContent = \"🔇\";\n      }\n      mute[i] = !mute[i];\n    });\n  });\n};\n\nconst draw = () => {\n  melodyOne.draw(beat);\n  melodyTwo.draw(beat);\n  drumMachine.draw(beat);\n  requestAnimationFrame(() => {\n    draw();\n  });\n};\n\nStartAudioContext(ctx, \"#play\", () => {\n  const playBtn = document.getElementById(\"play\");\n  console.log(\"AudioContext started!\");\n  console.log(\"start loading...\");\n  playBtn.firstChild.textContent = \"loading\";\n\n  copyRight();\n  setup();\n  setButtonEvents();\n  requestAnimationFrame(() => {\n    draw();\n  });\n});\n","const copyRight = () => {\n  console.log('%c Neural Loops ', 'background: #222; color: #f70ec4; font-size: 20px;');\n  console.log('%c 2019-04-24 ', 'background: #fff; color: #f70ec4; font-size: 15px;');\n  console.log('%c made by Vibert and Chris.', 'background: #fff; color: #f70ec4; font-size: 15px;');\n};\n\nexport {\n  copyRight,\n};\n"],"sourceRoot":""}